import { Test, TestingModule } from '@nestjs/testing';
import { TwitterController } from './Twitter.controller';
import { TwitterService } from './Twitter.service';

describe('TwitterController', () => {
  let controller: TwitterController;

  beforeEach(async () => {
    const module: TestingModule = await Test.createTestingModule({
      controllers: [TwitterController],
      providers: [TwitterService],
    })
      .overrideProvider(TwitterService)
      .useValue({
        getTwitterData: async () => {
          return [{"created_at":"30/11/2022, 12:15:32","author_id":"1439489090","text":"The market shows that BTC has broken through $16,800 and is now reported at $16,802.8, with an intraday increase of 3.84%. The market fluctuates greatly, so please do a good job in risk control. #BTC #ETH #XRP","user":{"created_at":"2013-05-18T21:23:04.000Z","profile_image_url":"https://pbs.twimg.com/profile_images/1594059896399753217/-7JSCySQ_normal.jpg","id":"1439489090","username":"Jenny247358","name":"moon"}},{"created_at":"30/11/2022, 12:06:38","author_id":"1036597918533332992","text":"Bitcoin Price Prediction as BTC Spikes Up 4.7% in a Week â€“ Time to Buy? https://t.co/BytNysmqKb \nhttps://t.co/pSW2gmyAma\nhttps://t.co/1q3yobjDUw #Cryptonews #Blockchain #NFTs #Metaverse #cryptolatest #Web3.0\n#Cryptotoday","user":{"created_at":"2018-09-03T12:52:57.000Z","profile_image_url":"https://pbs.twimg.com/profile_images/1561750057187266561/QZM5OTAt_normal.jpg","id":"1036597918533332992","username":"CryptoBeasta","name":"CryptoBeasta"}},{"created_at":"30/11/2022, 11:14:35","author_id":"1569366307635617794","text":"RT @CoreDao3_Org: The #ETH Merge is here with potential sacrifice on decentralization, the gap between BTC and ETH has never been wider. Whâ€¦","user":{"created_at":"2022-09-12T16:44:59.000Z","profile_image_url":"https://pbs.twimg.com/profile_images/1569366909082009607/GahDPL53_normal.jpg","id":"1569366307635617794","username":"MomoBoy37274571","name":"MomoBoy"}},{"created_at":"30/11/2022, 10:57:53","author_id":"1347611943859679234","text":"ECB director calls for Bitcoin ban, says BTC is not suitable for payments or investments\n\n#Bitcoin #ECB #BTC #BitcoinCrash #BitcoinCash #cryptocrash #Cryptocurency","user":{"created_at":"2021-01-08T18:31:50.000Z","profile_image_url":"https://pbs.twimg.com/profile_images/1580822200558329856/IFD3G_OQ_normal.jpg","id":"1347611943859679234","username":"jass_fxoverseas","name":"Jassica Harris"}},{"created_at":"30/11/2022, 09:40:32","author_id":"1595782717068673024","text":"RT @Coredao_Org: The #ETHMerge is here with potential sacrifice on decentralization, the gap between BTC and ETH has never been wider. Whatâ€¦","user":{"created_at":"2022-11-24T14:13:57.000Z","profile_image_url":"https://abs.twimg.com/sticky/default_profile_images/default_profile_normal.png","id":"1595782717068673024","username":"enduh20","name":"enduh"}},{"created_at":"30/11/2022, 08:35:23","author_id":"2335932043","text":"@yourcryptodj BTC and ETH as usual but for now My favorite crypto project is $FREEDOM an innovative Multi blockchain platform that aims to 1. Support the mass adoption of Cryptocurrency.  I'm trading it tomorrow on #MEXCGlobal and participate in their M-future event.","user":{"created_at":"2014-02-10T01:52:25.000Z","profile_image_url":"https://pbs.twimg.com/profile_images/547400022971527168/__rDeuny_normal.jpeg","id":"2335932043","username":"izzichocoyey","name":"izzi choco yey"}},{"created_at":"30/11/2022, 07:33:12","author_id":"1492936001127215104","text":"ETH Targets $1,300 on BTC Return to $17,000 Ahead of Powell's Speech\n #Neutral  #BTC\n #ETH https://t.co/Bam0gT3c8b","user":{"created_at":"2022-02-13T18:57:42.000Z","profile_image_url":"https://pbs.twimg.com/profile_images/1492936141116375041/m8-xDD8L_normal.jpg","id":"1492936001127215104","username":"crypto_talkies","name":"Crypto Talkies - Sentiment Analysis Tool"}},{"created_at":"30/11/2022, 07:05:03","author_id":"1597488622231588864","text":"#Bitcoin price regains traction, BTC seems poised for more gains\n\ntoday: $16 858,20","user":{"created_at":"2022-11-29T07:12:32.000Z","profile_image_url":"https://pbs.twimg.com/profile_images/1597488858022674433/Dxo5OQD7_normal.jpg","id":"1597488622231588864","username":"Linda_Anderson5","name":"Linda Anderson"}},{"created_at":"30/11/2022, 06:32:31","author_id":"1591420926859558921","text":"Belgium says BTC, ETH and other decentralized coins are not securities #crypto #defi #BTC #ETH #TRX","user":{"created_at":"2022-11-12T13:21:50.000Z","profile_image_url":"https://pbs.twimg.com/profile_images/1591421117914308611/z8XTHvv6_normal.jpg","id":"1591420926859558921","username":"ClaireClemens2","name":"JAWADI-BTC"}},{"created_at":"30/11/2022, 04:50:27","author_id":"1529469009598758913","text":"@Coredao_Org @onkar2237 @Cointelegraph The #ETHMerge is here with potential sacrifice on decentralization, the gap between BTC and ETH has never been wider. What does this mean for the future of Web3?  \nCoreDao ðŸ’¯","user":{"created_at":"2022-05-25T14:29:16.000Z","profile_image_url":"https://pbs.twimg.com/profile_images/1597768069770022915/aKXuvVNp_normal.jpg","id":"1529469009598758913","username":"0x000C666","name":"0x000C666"}}]
        }
      })
      .compile();

    controller = module.get<TwitterController>(TwitterController);
  });

  it('returns Twitter Data', async () => {
    let response = await controller.getTwitterData('BTC');
    expect(response).toEqual({"twitterData":[{"created_at":"30/11/2022, 12:15:32","author_id":"1439489090","text":"The market shows that BTC has broken through $16,800 and is now reported at $16,802.8, with an intraday increase of 3.84%. The market fluctuates greatly, so please do a good job in risk control. #BTC #ETH #XRP","user":{"created_at":"2013-05-18T21:23:04.000Z","profile_image_url":"https://pbs.twimg.com/profile_images/1594059896399753217/-7JSCySQ_normal.jpg","id":"1439489090","username":"Jenny247358","name":"moon"}},{"created_at":"30/11/2022, 12:06:38","author_id":"1036597918533332992","text":"Bitcoin Price Prediction as BTC Spikes Up 4.7% in a Week â€“ Time to Buy? https://t.co/BytNysmqKb \nhttps://t.co/pSW2gmyAma\nhttps://t.co/1q3yobjDUw #Cryptonews #Blockchain #NFTs #Metaverse #cryptolatest #Web3.0\n#Cryptotoday","user":{"created_at":"2018-09-03T12:52:57.000Z","profile_image_url":"https://pbs.twimg.com/profile_images/1561750057187266561/QZM5OTAt_normal.jpg","id":"1036597918533332992","username":"CryptoBeasta","name":"CryptoBeasta"}},{"created_at":"30/11/2022, 11:14:35","author_id":"1569366307635617794","text":"RT @CoreDao3_Org: The #ETH Merge is here with potential sacrifice on decentralization, the gap between BTC and ETH has never been wider. Whâ€¦","user":{"created_at":"2022-09-12T16:44:59.000Z","profile_image_url":"https://pbs.twimg.com/profile_images/1569366909082009607/GahDPL53_normal.jpg","id":"1569366307635617794","username":"MomoBoy37274571","name":"MomoBoy"}},{"created_at":"30/11/2022, 10:57:53","author_id":"1347611943859679234","text":"ECB director calls for Bitcoin ban, says BTC is not suitable for payments or investments\n\n#Bitcoin #ECB #BTC #BitcoinCrash #BitcoinCash #cryptocrash #Cryptocurency","user":{"created_at":"2021-01-08T18:31:50.000Z","profile_image_url":"https://pbs.twimg.com/profile_images/1580822200558329856/IFD3G_OQ_normal.jpg","id":"1347611943859679234","username":"jass_fxoverseas","name":"Jassica Harris"}},{"created_at":"30/11/2022, 09:40:32","author_id":"1595782717068673024","text":"RT @Coredao_Org: The #ETHMerge is here with potential sacrifice on decentralization, the gap between BTC and ETH has never been wider. Whatâ€¦","user":{"created_at":"2022-11-24T14:13:57.000Z","profile_image_url":"https://abs.twimg.com/sticky/default_profile_images/default_profile_normal.png","id":"1595782717068673024","username":"enduh20","name":"enduh"}},{"created_at":"30/11/2022, 08:35:23","author_id":"2335932043","text":"@yourcryptodj BTC and ETH as usual but for now My favorite crypto project is $FREEDOM an innovative Multi blockchain platform that aims to 1. Support the mass adoption of Cryptocurrency.  I'm trading it tomorrow on #MEXCGlobal and participate in their M-future event.","user":{"created_at":"2014-02-10T01:52:25.000Z","profile_image_url":"https://pbs.twimg.com/profile_images/547400022971527168/__rDeuny_normal.jpeg","id":"2335932043","username":"izzichocoyey","name":"izzi choco yey"}},{"created_at":"30/11/2022, 07:33:12","author_id":"1492936001127215104","text":"ETH Targets $1,300 on BTC Return to $17,000 Ahead of Powell's Speech\n #Neutral  #BTC\n #ETH https://t.co/Bam0gT3c8b","user":{"created_at":"2022-02-13T18:57:42.000Z","profile_image_url":"https://pbs.twimg.com/profile_images/1492936141116375041/m8-xDD8L_normal.jpg","id":"1492936001127215104","username":"crypto_talkies","name":"Crypto Talkies - Sentiment Analysis Tool"}},{"created_at":"30/11/2022, 07:05:03","author_id":"1597488622231588864","text":"#Bitcoin price regains traction, BTC seems poised for more gains\n\ntoday: $16 858,20","user":{"created_at":"2022-11-29T07:12:32.000Z","profile_image_url":"https://pbs.twimg.com/profile_images/1597488858022674433/Dxo5OQD7_normal.jpg","id":"1597488622231588864","username":"Linda_Anderson5","name":"Linda Anderson"}},{"created_at":"30/11/2022, 06:32:31","author_id":"1591420926859558921","text":"Belgium says BTC, ETH and other decentralized coins are not securities #crypto #defi #BTC #ETH #TRX","user":{"created_at":"2022-11-12T13:21:50.000Z","profile_image_url":"https://pbs.twimg.com/profile_images/1591421117914308611/z8XTHvv6_normal.jpg","id":"1591420926859558921","username":"ClaireClemens2","name":"JAWADI-BTC"}},{"created_at":"30/11/2022, 04:50:27","author_id":"1529469009598758913","text":"@Coredao_Org @onkar2237 @Cointelegraph The #ETHMerge is here with potential sacrifice on decentralization, the gap between BTC and ETH has never been wider. What does this mean for the future of Web3?  \nCoreDao ðŸ’¯","user":{"created_at":"2022-05-25T14:29:16.000Z","profile_image_url":"https://pbs.twimg.com/profile_images/1597768069770022915/aKXuvVNp_normal.jpg","id":"1529469009598758913","username":"0x000C666","name":"0x000C666"}}]});
  });
});
